<!DOCTYPE html>
<html lang="bg" dir="ltr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <!-- Chosen Palette: Psychologically-Informed Trust & Action Palette -->
    <!-- Application Structure Plan: A tabbed single-page application (SPA) architecture is chosen to align with the "iOS style" and the "Law of Hick," reducing cognitive load by organizing complex functionality into clear, distinct sections (Markets, News, Education, Portfolio). This structure allows users to focus on one primary task at a time, creating an intuitive, app-like experience. Navigation is handled by a persistent top header on desktop and a bottom tab bar on mobile, applying "Fitts's Law" by placing controls in easily accessible areas. The flow is designed for progressive disclosure; for example, the Education section presents high-level categories first, then allows users to drill down, preventing them from being overwhelmed. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Charting Engine -> Goal: Provide professional-grade analysis -> Viz: TradingView Advanced Charts -> Interaction: Full user control over indicators, drawings, and timeframes. Justification: This is the industry standard for power and reliability, essential for the "prosumer" target audience. Library: TradingView.
        - Report Info: News Hub -> Goal: Deliver actionable intelligence -> Viz: A card-based, filterable list -> Interaction: Users can filter by category. Sentiment is shown via colored dots. Justification: This transforms a passive feed into an active analytical tool, as outlined in the blueprint. Method: HTML/CSS/JS.
        - Report Info: Education Ecosystem -> Goal: Guide users from novice to expert -> Viz: A structured grid of course cards with progress indicators -> Interaction: Users click cards to see course details. Justification: This gamified, visually organized approach makes learning engaging and tracks progress, fostering user retention. Method: HTML/CSS/JS.
        - Report Info: Internationalization -> Goal: Global reach -> Viz: A simple dropdown menu -> Interaction: User selects a language, and the UI text updates instantly. Justification: Essential for a "world-class" platform as defined in the report. Method: JS dictionary lookup.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <title data-lang-key="title">OpenTrading - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ—Ç –°–≤–µ—Ç–æ–≤–Ω–∞ –ö–ª–∞—Å–∞</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

    <style>
        :root {
            --brand-blue: #0A84FF;
            --brand-green: #30D158;
            --brand-red: #FF453A;
            --brand-orange: #FF9F0A;
            --brand-teal: #64D2FF;

            --light-bg: #F2F2F7;
            --light-card-bg: #FFFFFF;
            --light-text-primary: #000000;
            --light-text-secondary: #636366;
            --light-separator: rgba(60, 60, 67, 0.29);
            --light-header-bg: rgba(249, 249, 249, 0.85);

            --dark-bg: #0d1117;
            --dark-card-bg: #161b22;
            --dark-text-primary: #e6edf3;
            --dark-text-secondary: #848d97;
            --dark-separator: rgba(255, 255, 255, 0.15);
            --dark-header-bg: rgba(22, 27, 34, 0.85);
            
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --shadow-glow: 0 0 20px rgba(10, 132, 255, 0.25);
            --radius-main: 1rem; /* 16px */
            --radius-inner: 0.75rem; /* 12px */
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-family);
            background-color: var(--dark-bg);
            color: var(--dark-text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        body.light-mode {
            background-color: var(--light-bg);
            color: var(--light-text-primary);
        }
        .glass-header {
            background-color: var(--dark-header-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid var(--dark-separator);
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
        body.light-mode .glass-header {
            background-color: var(--light-header-bg);
            border-bottom: 1px solid var(--light-separator);
        }
        .content-section { display: none; }
        .content-section.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .progress-bar-inner { transition: width 0.5s ease-out; }
    </style>
</head>

<body class="dark-mode">

    <!-- Desktop Header -->
    <header id="desktop-header" class="glass-header sticky top-0 z-50 hidden lg:block">
        <div class="mx-auto max-w-7xl px-4">
            <div class="grid grid-cols-3 items-center h-16">
                <nav class="flex items-center space-x-6">
                    <button class="nav-item text-sm font-semibold" data-section="charts" data-lang-key="nav_charts">–ì—Ä–∞—Ñ–∏–∫–∏</button>
                    <button class="nav-item text-sm font-semibold" data-section="news" data-lang-key="nav_news">–ù–æ–≤–∏–Ω–∏</button>
                    <button class="nav-item text-sm font-semibold" data-section="education" data-lang-key="nav_education">–û–±—É—á–µ–Ω–∏–µ</button>
                </nav>
                <div class="flex justify-center">
                    <div class="text-xl font-extrabold tracking-tighter" data-lang-key="logo">OPENTRADING</div>
                </div>
                <div class="flex items-center justify-end space-x-4">
                    <!-- Language Selector -->
                    <div class="relative" id="lang-switcher">
                        <button class="flex items-center text-sm font-medium text-gray-400 hover:text-white transition">
                            <span>üåê</span>
                            <span id="current-lang-text" class="ml-2">–ë—ä–ª–≥–∞—Ä—Å–∫–∏</span>
                        </button>
                        <div id="lang-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-[var(--dark-card-bg)] border border-[var(--dark-separator)] rounded-lg shadow-lg py-1">
                            <!-- Languages will be injected here by JS -->
                        </div>
                    </div>
                    <!-- Theme Toggle -->
                    <label for="theme-toggle" class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="theme-toggle" class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-600 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[var(--brand-blue)]"></div>
                    </label>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="pb-24 lg:pb-8 lg:pt-8">
        
        <!-- Markets / Charts Section -->
        <section id="charts-section" class="content-section">
            <div class="mx-auto max-w-7xl px-4">
                <h1 class="text-3xl font-bold tracking-tight mb-4" data-lang-key="charts_title">–ü–∞–∑–∞—Ä–∏</h1>
                <div class="relative mb-6">
                    <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                        <span class="text-gray-500">üîé</span>
                    </div>
                    <input type="text" id="symbol-search" class="block w-full rounded-md border-0 py-2.5 pl-10 bg-[var(--dark-card-bg)] border-transparent focus:ring-2 focus:ring-inset focus:ring-[var(--brand-blue)]" placeholder="–¢—ä—Ä—Å–µ–Ω–µ –Ω–∞ —Å–∏–º–≤–æ–ª... (–Ω–∞–ø—Ä. AAPL)" data-lang-key="symbol_search_placeholder">
                </div>
                <div id="main-chart-container" class="h-[70vh] rounded-lg overflow-hidden border border-[var(--dark-separator)]"></div>
            </div>
        </section>

        <!-- News Section -->
        <section id="news-section" class="content-section">
            <div class="mx-auto max-w-7xl px-4">
                <div class="flex justify-between items-center mb-4">
                    <h1 class="text-3xl font-bold tracking-tight" data-lang-key="news_title">–§–∏–Ω–∞–Ω—Å–æ–≤–∏ –ù–æ–≤–∏–Ω–∏</h1>
                    <!-- Filters could go here -->
                </div>
                <div id="news-feed-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- News cards will be injected here -->
                </div>
            </div>
        </section>

        <!-- Education Section -->
        <section id="education-section" class="content-section">
            <div class="mx-auto max-w-7xl px-4">
                 <div class="text-center mb-12">
                    <h1 class="text-4xl font-extrabold tracking-tight" data-lang-key="education_title">–¶–µ–Ω—Ç—ä—Ä –∑–∞ –ó–Ω–∞–Ω–∏—è</h1>
                    <p class="mt-4 max-w-2xl mx-auto text-[var(--dark-text-secondary)]" data-lang-key="education_subtitle">–í–∞—à–∏—è—Ç –ø—ä—Ç –∫—ä–º —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ –º–∞–π—Å—Ç–æ—Ä—Å—Ç–≤–æ, –æ—Ç –æ—Å–Ω–æ–≤–∏—Ç–µ –¥–æ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∏—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.</p>
                </div>
                <div id="education-levels-container" class="space-y-12">
                    <!-- Education levels and courses will be injected here -->
                </div>
            </div>
        </section>
        
    </main>
    
    <!-- Mobile Bottom Nav -->
    <nav id="mobile-nav" class="lg:hidden glass-header fixed bottom-0 left-0 right-0 z-50 border-t">
        <div class="flex justify-around items-center h-16">
            <button class="nav-item flex flex-col items-center justify-center space-y-1 w-full" data-section="charts">
                <span class="text-2xl">üìà</span>
                <span class="text-xs font-medium" data-lang-key="nav_charts">–ì—Ä–∞—Ñ–∏–∫–∏</span>
            </button>
            <button class="nav-item flex flex-col items-center justify-center space-y-1 w-full" data-section="news">
                <span class="text-2xl">üì∞</span>
                <span class="text-xs font-medium" data-lang-key="nav_news">–ù–æ–≤–∏–Ω–∏</span>
            </button>
            <button class="nav-item flex flex-col items-center justify-center space-y-1 w-full" data-section="education">
                <span class="text-2xl">üéì</span>
                <span class="text-xs font-medium" data-lang-key="nav_education">–û–±—É—á–µ–Ω–∏–µ</span>
            </button>
        </div>
    </nav>


    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- 1. APPLICATION STATE & DATA ---
        const app = {
            state: {
                currentSection: 'charts',
                currentSymbol: 'AAPL',
                isDarkMode: true,
                currentLang: 'bg',
            },
            
            // --- DATA: Language Content ---
            content: {
                bg: {
                    title: "OpenTrading - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ—Ç –°–≤–µ—Ç–æ–≤–Ω–∞ –ö–ª–∞—Å–∞", logo: "OPENTRADING",
                    nav_charts: "–ì—Ä–∞—Ñ–∏–∫–∏", nav_news: "–ù–æ–≤–∏–Ω–∏", nav_education: "–û–±—É—á–µ–Ω–∏–µ",
                    charts_title: "–ü–∞–∑–∞—Ä–∏", symbol_search_placeholder: "–¢—ä—Ä—Å–µ–Ω–µ –Ω–∞ —Å–∏–º–≤–æ–ª... (–Ω–∞–ø—Ä. AAPL)",
                    news_title: "–§–∏–Ω–∞–Ω—Å–æ–≤–∏ –ù–æ–≤–∏–Ω–∏",
                    education_title: "–¶–µ–Ω—Ç—ä—Ä –∑–∞ –ó–Ω–∞–Ω–∏—è", education_subtitle: "–í–∞—à–∏—è—Ç –ø—ä—Ç –∫—ä–º —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ –º–∞–π—Å—Ç–æ—Ä—Å—Ç–≤–æ, –æ—Ç –æ—Å–Ω–æ–≤–∏—Ç–µ –¥–æ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∏—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.",
                    edu_beginner_title: "–ù–∏–≤–æ 1: –û—Å–Ω–æ–≤–∏", edu_beginner_desc: "–ò–∑–≥—Ä–∞–¥–µ—Ç–µ –∑–¥—Ä–∞–≤–∞ –æ—Å–Ω–æ–≤–∞ —Å –æ—Å–Ω–æ–≤–Ω–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∏ –ø–æ–∑–Ω–∞–Ω–∏—è. –ò–¥–µ–∞–ª–Ω–æ –∑–∞ –Ω–∞—á–∏–Ω–∞–µ—â–∏.",
                    edu_intermediate_title: "–ù–∏–≤–æ 2: –ê–Ω–∞–ª–∏–∑ –∏ –°—Ç—Ä–∞—Ç–µ–≥–∏—è", edu_intermediate_desc: "–ù–∞—É—á–µ—Ç–µ —Å–µ –¥–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä–∞—Ç–µ –ø–∞–∑–∞—Ä–∏—Ç–µ –∏ –¥–∞ –∏–∑–≥—Ä–∞–∂–¥–∞—Ç–µ –ø—ä—Ä–≤–∏—Ç–µ —Å–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.",
                    edu_advanced_title: "–ù–∏–≤–æ 3: –ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∏ –¢–µ—Ö–Ω–∏–∫–∏", edu_advanced_desc: "–û–≤–ª–∞–¥–µ–π—Ç–µ —Å–ª–æ–∂–Ω–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–∏ –ø–æ–¥—Ö–æ–¥–∏ –∑–∞ —Å–µ—Ä–∏–æ–∑–Ω–∏ —Ç—Ä–µ–π–¥—ä—Ä–∏.",
                },
                en: {
                    title: "OpenTrading - World Class Platform", logo: "OPENTRADING",
                    nav_charts: "Charts", nav_news: "News", nav_education: "Education",
                    charts_title: "Markets", symbol_search_placeholder: "Search for a symbol... (e.g. AAPL)",
                    news_title: "Financial News",
                    education_title: "Knowledge Center", education_subtitle: "Your path to financial mastery, from the basics to professional strategies.",
                    edu_beginner_title: "Level 1: Foundations", edu_beginner_desc: "Build a solid foundation with essential financial literacy. Perfect for beginners.",
                    edu_intermediate_title: "Level 2: Analysis & Strategy", edu_intermediate_desc: "Learn to analyze the markets and build your first trading strategies.",
                    edu_advanced_title: "Level 3: Professional Techniques", edu_advanced_desc: "Master complex instruments and quantitative approaches for serious traders.",
                },
                es: {
                    title: "OpenTrading - Plataforma de Clase Mundial", logo: "OPENTRADING",
                    nav_charts: "Gr√°ficos", nav_news: "Noticias", nav_education: "Educaci√≥n",
                    charts_title: "Mercados", symbol_search_placeholder: "Buscar un s√≠mbolo... (ej. AAPL)",
                    news_title: "Noticias Financieras",
                    education_title: "Centro de Conocimiento", education_subtitle: "Su camino hacia la maestr√≠a financiera, desde lo b√°sico hasta estrategias profesionales.",
                    edu_beginner_title: "Nivel 1: Fundamentos", edu_beginner_desc: "Construya una base s√≥lida con conocimientos financieros esenciales. Perfecto para principiantes.",
                    edu_intermediate_title: "Nivel 2: An√°lisis y Estrategia", edu_intermediate_desc: "Aprenda a analizar los mercados y a construir sus primeras estrategias de trading.",
                    edu_advanced_title: "Nivel 3: T√©cnicas Profesionales", edu_advanced_desc: "Domine instrumentos complejos y enfoques cuantitativos para traders serios.",
                },
            },

            // --- DATA: Education Content (Structure) ---
            educationData: [
                { id: 'beginner', titleKey: 'edu_beginner_title', descKey: 'edu_beginner_desc', color: 'var(--brand-teal)', courses: [
                    { title: "–ö–∞–∫–≤–æ –µ –∞–∫—Ü–∏—è?", progress: 100 }, { title: "–ë—é–¥–∂–µ—Ç–∏—Ä–∞–Ω–µ 101", progress: 60 }, { title: "–†–∞–∑–±–∏—Ä–∞–Ω–µ –Ω–∞ ETF", progress: 20 }
                ]},
                { id: 'intermediate', titleKey: 'edu_intermediate_title', descKey: 'edu_intermediate_desc', color: 'var(--brand-blue)', courses: [
                    { title: "–í—ä–≤–µ–¥–µ–Ω–∏–µ –≤ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏—è –ê–Ω–∞–ª–∏–∑", progress: 75 }, { title: "–û—Å–Ω–æ–≤–Ω–∏ –û–ø—Ü–∏–æ–Ω–Ω–∏ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏", progress: 40 }, { title: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ä–∏—Å–∫–∞", progress: 0 }
                ]},
                { id: 'advanced', titleKey: 'edu_advanced_title', descKey: 'edu_advanced_desc', color: 'var(--brand-orange)', courses: [
                    { title: "–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å—ä—Å –°–ø—Ä–µ–¥–æ–≤–µ", progress: 15 }, { title: "–ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω –∞–Ω–∞–ª–∏–∑", progress: 0 }, { title: "–ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–Ω–∞ —Ç—ä—Ä–≥–æ–≤–∏—è", progress: 0 }
                ]}
            ],
            
             // --- DATA: News Feed (Dummy) ---
            newsData: [
                { sentiment: 'positive', source: 'Reuters', headline: 'Apple Inc. reports record-breaking quarterly earnings, shares surge.' },
                { sentiment: 'negative', source: 'Bloomberg', headline: 'Federal Reserve hints at earlier-than-expected interest rate hikes, markets tumble.' },
                { sentiment: 'neutral', source: 'Dow Jones', headline: 'Crude oil prices stabilize after a week of high volatility.' },
                { sentiment: 'positive', source: 'Reuters', headline: 'Tesla announces new battery technology, potentially doubling vehicle range.' },
                { sentiment: 'negative', source: 'Associated Press', headline: 'Global supply chain issues expected to continue through Q4, impacting consumer goods.' },
                { sentiment: 'neutral', source: 'Financial Times', headline: 'European Central Bank maintains its current monetary policy stance.' }
            ],

            // --- DATA: Available Languages ---
            languages: {
                bg: "–ë—ä–ª–≥–∞—Ä—Å–∫–∏", en: "English", es: "Espa√±ol", de: "Deutsch", fr: "Fran√ßais", 
                ru: "–†—É—Å—Å–∫–∏–π", zh: "‰∏≠Êñá (Mandarin)", hi: "‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)", ar: "ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabic)", pt: "Portugu√™s"
            }
        };

        // --- 2. DOM ELEMENT REFERENCES ---
        const dom = {
            navItems: document.querySelectorAll('.nav-item'),
            contentSections: document.querySelectorAll('.content-section'),
            themeToggle: document.getElementById('theme-toggle'),
            symbolSearchInput: document.getElementById('symbol-search'),
            langSwitcher: document.getElementById('lang-switcher'),
            langDropdown: document.getElementById('lang-dropdown'),
            currentLangText: document.getElementById('current-lang-text'),
            educationContainer: document.getElementById('education-levels-container'),
            newsFeedContainer: document.getElementById('news-feed-container'),
        };

        // --- 3. CORE FUNCTIONS ---
        const updateLanguage = () => {
            const lang = app.state.currentLang;
            const langPack = app.content[lang] || app.content.en;

            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.dataset.langKey;
                if (langPack[key]) {
                    if (el.placeholder) {
                        el.placeholder = langPack[key];
                    } else {
                        el.textContent = langPack[key];
                    }
                }
            });
            document.documentElement.lang = lang;
            document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';
            dom.currentLangText.textContent = app.languages[lang];
            
            // Re-render dynamic content
            populateEducation();
            populateNews();
            loadTradingViewWidgets();
        };

        const switchSection = (sectionId) => {
            app.state.currentSection = sectionId;
            dom.navItems.forEach(nav => {
                nav.classList.toggle('text-[var(--brand-blue)]', nav.dataset.section === sectionId);
                nav.classList.toggle('text-[var(--dark-text-secondary)]', nav.dataset.section !== sectionId);
                 if(document.body.classList.contains('light-mode')) {
                     nav.classList.toggle('text-[var(--brand-blue)]', nav.dataset.section === sectionId);
                     nav.classList.toggle('text-gray-500', nav.dataset.section !== sectionId);
                 }
            });
            dom.contentSections.forEach(section => {
                section.classList.toggle('active', section.id.startsWith(sectionId));
            });
            loadTradingViewWidgets();
        };

        const toggleTheme = () => {
            app.state.isDarkMode = !app.state.isDarkMode;
            document.body.classList.toggle('light-mode', !app.state.isDarkMode);
            document.body.classList.toggle('dark-mode', app.state.isDarkMode);
            localStorage.setItem('theme', app.state.isDarkMode ? 'dark' : 'light');
            loadTradingViewWidgets();
        };
        
        const handleSymbolSearch = (e) => {
             if (e.key === 'Enter' && e.target.value.trim() !== '') {
                app.state.currentSymbol = e.target.value.trim().toUpperCase();
                e.target.value = '';
                if(app.state.currentSection === 'charts') {
                    loadTradingViewWidgets();
                }
            }
        };

        // --- 4. WIDGET & DYNAMIC CONTENT FUNCTIONS ---
        const destroyElementChildren = (elementId) => {
            const el = document.getElementById(elementId);
            if(el) el.innerHTML = '';
        }

        const loadTradingViewWidgets = () => {
            if (app.state.currentSection === 'charts') {
                 destroyElementChildren('main-chart-container');
                 new TradingView.widget({
                    autosize: true, symbol: app.state.currentSymbol, interval: "D", timezone: "Etc/UTC",
                    theme: app.state.isDarkMode ? "dark" : "light", style: "1", locale: app.state.currentLang,
                    toolbar_bg: app.state.isDarkMode ? "#161b22" : "#FFFFFF", enable_publishing: false,
                    hide_side_toolbar: false, allow_symbol_change: false, details: true, hotlist: true, calendar: true,
                    container_id: "main-chart-container"
                });
            }
        };

        const populateEducation = () => {
            dom.educationContainer.innerHTML = '';
            const langPack = app.content[app.state.currentLang] || app.content.en;
            app.educationData.forEach(level => {
                const levelEl = document.createElement('div');
                let coursesHtml = level.courses.map(course => `
                    <div class="p-4 rounded-lg bg-black/20">
                        <div class="flex justify-between items-center mb-1">
                            <h4 class="font-semibold text-sm">${course.title}</h4>
                            <span class="text-xs font-mono text-gray-400">${course.progress}%</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-1.5">
                            <div class="progress-bar-inner bg-white rounded-full h-1.5" style="width: ${course.progress}%"></div>
                        </div>
                    </div>
                `).join('');

                levelEl.innerHTML = `
                    <div class="p-6 rounded-xl" style="background-color: ${level.color}; color: white;">
                        <h2 class="text-2xl font-bold">${langPack[level.titleKey]}</h2>
                        <p class="mt-2 text-white/80">${langPack[level.descKey]}</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6">${coursesHtml}</div>
                `;
                dom.educationContainer.appendChild(levelEl);
            });
        };
        
        const populateNews = () => {
            dom.newsFeedContainer.innerHTML = '';
            const sentimentStyles = {
                positive: 'bg-green-500',
                negative: 'bg-red-500',
                neutral: 'bg-gray-500'
            };
            app.newsData.forEach(item => {
                const card = `
                    <div class="bg-[var(--dark-card-bg)] border border-[var(--dark-separator)] rounded-lg p-5 flex flex-col">
                        <div class="flex items-center mb-3">
                            <span class="w-3 h-3 rounded-full ${sentimentStyles[item.sentiment]} mr-2"></span>
                            <span class="text-xs font-bold uppercase tracking-wider text-gray-400">${item.source}</span>
                        </div>
                        <h3 class="font-semibold flex-grow">${item.headline}</h3>
                    </div>`;
                dom.newsFeedContainer.innerHTML += card;
            });
        };
        
        const populateLanguageDropdown = () => {
            dom.langDropdown.innerHTML = '';
            for(const [code, name] of Object.entries(app.languages)) {
                const langItem = document.createElement('a');
                langItem.href = '#';
                langItem.dataset.langCode = code;
                langItem.className = 'block px-4 py-2 text-sm text-[var(--dark-text-secondary)] hover:bg-gray-700 hover:text-white';
                langItem.textContent = name;
                langItem.addEventListener('click', (e) => {
                    e.preventDefault();
                    app.state.currentLang = code;
                    updateLanguage();
                    dom.langDropdown.classList.add('hidden');
                });
                dom.langDropdown.appendChild(langItem);
            }
        };


        // --- 5. INITIALIZATION & EVENT LISTENERS ---
        const init = () => {
            // Restore theme from localStorage
            const savedTheme = localStorage.getItem('theme');
            app.state.isDarkMode = savedTheme === 'dark' || savedTheme === null;
            dom.themeToggle.checked = app.state.isDarkMode;
            toggleTheme(); // Apply initial theme correctly

            dom.navItems.forEach(item => item.addEventListener('click', () => switchSection(item.dataset.section)));
            dom.themeToggle.addEventListener('change', toggleTheme);
            dom.symbolSearchInput.addEventListener('keydown', handleSymbolSearch);
            
            // Language Switcher Logic
            dom.langSwitcher.addEventListener('click', (e) => {
                 e.stopPropagation();
                 dom.langDropdown.classList.toggle('hidden');
            });
            document.addEventListener('click', (e) => {
                if (!dom.langSwitcher.contains(e.target)) {
                    dom.langDropdown.classList.add('hidden');
                }
            });

            populateLanguageDropdown();
            updateLanguage();
            switchSection('charts');
        };

        init();
    });
    </script>
</body>
</html>
